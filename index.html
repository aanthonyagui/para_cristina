<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Para Cristina Jamile ‚ù§Ô∏è</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Pacifico&family=Poppins:wght@300;500;700&display=swap');

        /* --- BASE --- */
        * { box-sizing: border-box; touch-action: manipulation; -webkit-tap-highlight-color: transparent; user-select: none; }
        
        body {
            margin: 0; padding: 0; width: 100vw; height: 100vh; height: 100dvh;
            overflow: hidden; font-family: 'Poppins', sans-serif;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: background 1s ease; color: #fff;
        }

        /* --- FONDOS --- */
        body.theme-0 { background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%); }
        body.theme-1 { background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); }
        body.theme-2 { background: linear-gradient(135deg, #f6d365 0%, #fda085 100%); }
        body.theme-3 { background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%); }

        /* --- UI SUPERIOR --- */
        .game-ui {
            position: absolute; top: 20px; width: 100%; text-align: center; z-index: 20;
            pointer-events: none;
        }

        .day-badge {
            background: #fff; color: #ff6b81; padding: 5px 20px; border-radius: 30px;
            font-family: 'Fredoka One', cursive; font-size: 1.1rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: inline-block; margin-bottom: 5px;
        }

        h1 {
            font-family: 'Pacifico', cursive; font-size: 2rem;
            text-shadow: 0 2px 5px rgba(0,0,0,0.2); margin: 0;
        }

        .instruction {
            font-size: 0.9rem; background: rgba(0,0,0,0.25); color: #fff;
            padding: 4px 15px; border-radius: 10px; display: inline-block; margin-top: 5px;
            backdrop-filter: blur(5px);
        }

        /* --- √ÅREA DE JUEGO --- */
        #gameArea {
            width: 100%; height: 100%; position: relative; z-index: 10;
            display: flex; justify-content: center; align-items: center;
        }

        /* Elementos Generales de los juegos */
        .heart-btn { font-size: 4rem; cursor: pointer; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.2)); position: absolute; transition: transform 0.1s; }
        .heart-btn:active { transform: scale(0.9); }

        /* JUEGO 4: Grid */
        .grid-container {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px;
            background: rgba(255,255,255,0.2); padding: 20px; border-radius: 20px;
        }
        .grid-item { font-size: 2.5rem; cursor: pointer; transition: transform 0.2s; }
        .grid-item:active { transform: scale(0.8); }

        /* JUEGO 7: Math */
        .math-container { text-align: center; }
        .math-question { font-size: 2.5rem; font-weight: bold; margin-bottom: 20px; }
        .options-row { display: flex; gap: 20px; justify-content: center; }
        .option-btn {
            background: white; color: #ff6b81; padding: 15px 25px; border-radius: 15px;
            font-weight: bold; font-size: 1.2rem; cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .option-btn:active { transform: scale(0.95); }

        /* JUEGO 10: Slider */
        .slider-container { width: 80%; text-align: center; }
        input[type=range] {
            width: 100%; -webkit-appearance: none; background: rgba(255,255,255,0.3);
            height: 15px; border-radius: 10px; outline: none;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; width: 40px; height: 40px; background: #fff;
            border-radius: 50%; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        /* --- MODAL --- */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 5000;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: 0.5s;
        }
        .modal.active { opacity: 1; pointer-events: all; }
        .modal-card {
            background: white; width: 85%; max-width: 400px; padding: 30px;
            border-radius: 25px; text-align: center; transform: scale(0.5); transition: 0.4s;
            border: 4px solid #ff9a9e; color: #333;
        }
        .modal.active .modal-card { transform: scale(1); }
        .btn-restart {
            background: #ff6b81; color: white; border: none; padding: 10px 25px;
            border-radius: 20px; font-weight: bold; cursor: pointer; margin-top: 15px;
        }

    </style>
</head>
<body>

    <div class="game-ui">
        <div id="dayBadge" class="day-badge">D√≠a 1</div>
        <h1>Cristina Jamile</h1>
        <div id="instruction" class="instruction">Cargando...</div>
    </div>

    <div id="gameArea">
        </div>

    <div class="modal" id="winModal">
        <div class="modal-card">
            <h2 style="margin:0; color:#ff6b81;">¬°Muy Bien! üíñ</h2>
            <p id="finalMsg" style="font-style:italic; font-size:1.1rem; margin: 20px 0;">...</p>
            <div style="font-size: 3rem;">ü•∞üíèüéâ</div>
            <button class="btn-restart" onclick="location.reload()">Jugar otro</button>
        </div>
    </div>

    <script>
        // ================= CONFIGURACI√ìN =================
        const startDate = new Date(2025, 11, 29); // 29 Dic 2025
        
        const messages = [
            "Eres mi casualidad favorita.",
            "Me alegras la vida con solo existir.",
            "Cada d√≠a te quiero un poquito m√°s.",
            "Eres mi lugar seguro en el mundo.",
            "Gracias por ser t√∫, siempre.",
            "Contigo todo es m√°s bonito.",
            "Te elijo hoy y siempre.",
            "Tu sonrisa es mi debilidad.",
            "Me encantas much√≠simo.",
            "Eres el amor de mi vida."
        ];

        // Estado del Juego
        let state = { score: 0, target: 0, active: true };
        const area = document.getElementById('gameArea');
        const instr = document.getElementById('instruction');

        // ================= INICIO =================
        function init() {
            // 1. Calcular D√≠a
            const now = new Date();
            const diff = Math.floor((now - startDate) / (1000 * 60 * 60 * 24));
            let day = diff >= 0 ? diff + 1 : 1;
            
            // 2. Establecer Tema y Texto
            document.body.className = `theme-${day % 4}`;
            document.getElementById('dayBadge').innerText = `D√≠a ${day}`;

            // 3. SELECCIONAR JUEGO (Rotaci√≥n de 10)
            const gameIndex = (day - 1) % 10;
            const games = [
                playChase,      // 0
                playRain,       // 1
                playClicker,    // 2
                playUnique,     // 3
                playBalloon,    // 4
                playWhack,      // 5
                playMath,       // 6
                playSequence,   // 7
                playMemory,     // 8
                playSlider      // 9
            ];

            // Ejecutar juego
            games[gameIndex]();
        }

        // ================= JUEGOS =================

        // 1. EL ESCAPISTA
        function playChase() {
            instr.innerText = "¬°Atrapa el coraz√≥n 5 veces!";
            state.target = 5;
            createMovingBtn('‚ù§Ô∏è', () => {
                state.score++;
                if(state.score >= state.target) win();
                else {
                    instr.innerText = `Faltan ${state.target - state.score}`;
                    popEffect();
                }
            });
        }

        // 2. LLUVIA
        function playRain() {
            instr.innerText = "¬°Atrapa 5 objetos cayendo!";
            state.target = 5;
            
            let spawner = setInterval(() => {
                if(!state.active) return clearInterval(spawner);
                const el = document.createElement('div');
                el.innerText = ['üå∏','‚ú®','üíñ'][Math.floor(Math.random()*3)];
                el.style.position = 'absolute';
                el.style.left = Math.random()*80 + 10 + '%';
                el.style.top = '-50px';
                el.style.fontSize = '3rem';
                el.style.transition = 'top 3s linear';
                
                el.addEventListener('pointerdown', () => {
                    el.remove();
                    state.score++;
                    if(state.score >= state.target) { state.active = false; win(); }
                });
                
                area.appendChild(el);
                setTimeout(() => el.style.top = '110vh', 50);
                setTimeout(() => el.remove(), 3000);
            }, 700);
        }

        // 3. CLICKER
        function playClicker() {
            instr.innerText = "¬°Dale muchos toques r√°pidos!";
            state.target = 15;
            
            const btn = document.createElement('div');
            btn.className = 'heart-btn';
            btn.innerText = 'üî•';
            btn.style.position = 'relative'; // Centrado flex
            
            btn.addEventListener('pointerdown', () => {
                state.score++;
                btn.style.transform = 'scale(1.3)';
                setTimeout(() => btn.style.transform = 'scale(1)', 100);
                
                if(state.score >= state.target) win();
            });
            area.appendChild(btn);
        }

        // 4. ENCUENTRA EL DIFERENTE
        function playUnique() {
            instr.innerText = "Encuentra el emoji diferente";
            area.innerHTML = '<div class="grid-container" id="grid"></div>';
            const grid = document.getElementById('grid');
            
            const wrong = 'üòê';
            const right = 'üòç';
            const size = 16;
            const winnerIdx = Math.floor(Math.random() * size);

            for(let i=0; i<size; i++) {
                const item = document.createElement('div');
                item.className = 'grid-item';
                item.innerText = (i === winnerIdx) ? right : wrong;
                item.onclick = () => {
                    if(i === winnerIdx) win();
                    else item.innerText = '‚ùå';
                }
                grid.appendChild(item);
            }
        }

        // 5. INFLA EL GLOBO
        function playBalloon() {
            instr.innerText = "Mant√©n presionado para inflar";
            const btn = document.createElement('div');
            btn.innerText = 'üéà';
            btn.style.fontSize = '3rem';
            btn.style.cursor = 'pointer';
            btn.style.userSelect = 'none';
            
            let scale = 1;
            let growing = false;

            btn.addEventListener('pointerdown', () => growing = true);
            btn.addEventListener('pointerup', () => growing = false);
            
            area.appendChild(btn);

            setInterval(() => {
                if(growing && state.active) {
                    scale += 0.05;
                    btn.style.transform = `scale(${scale})`;
                    if(scale > 4) {
                        state.active = false;
                        btn.innerText = 'üí•';
                        setTimeout(win, 500);
                    }
                } else if(!growing && scale > 1 && state.active) {
                    scale -= 0.05;
                    btn.style.transform = `scale(${scale})`;
                }
            }, 50);
        }

        // 6. WHACK-A-HEART
        function playWhack() {
            instr.innerText = "¬°Golpea el coraz√≥n cuando aparezca!";
            state.target = 5;
            
            const btn = document.createElement('div');
            btn.className = 'heart-btn';
            btn.innerText = 'üêπ';
            btn.style.transition = 'none'; // Salto instant√°neo
            
            btn.onpointerdown = () => {
                state.score++;
                popEffect();
                if(state.score >= state.target) { state.active=false; win(); btn.remove(); }
                else moveRandom(btn);
            };
            
            area.appendChild(btn);
            moveRandom(btn);

            let jumper = setInterval(() => {
                if(!state.active) return clearInterval(jumper);
                moveRandom(btn);
            }, 800);
        }

        // 7. MATEM√ÅTICAS
        function playMath() {
            instr.innerText = "Resuelve la ecuaci√≥n";
            area.innerHTML = `
                <div class="math-container">
                    <div class="math-question">1 + 1 = ?</div>
                    <div class="options-row">
                        <div class="option-btn" onclick="wrongAnswer(this)">2</div>
                        <div class="option-btn" onclick="win()">Nosotros</div>
                        <div class="option-btn" onclick="wrongAnswer(this)">11</div>
                    </div>
                </div>
            `;
        }

        // 8. SECUENCIA
        function playSequence() {
            instr.innerText = "Toca en orden: 1, 2, 3, ‚ù§Ô∏è";
            const seq = ['1', '2', '3', '‚ù§Ô∏è'];
            let current = 0;
            
            area.innerHTML = '<div class="grid-container" style="grid-template-columns:repeat(2,1fr)" id="seqGrid"></div>';
            const grid = document.getElementById('seqGrid');
            
            // Barajar visualmente pero mantener l√≥gica
            let items = [...seq].sort(() => Math.random() - 0.5);
            
            items.forEach(val => {
                const btn = document.createElement('div');
                btn.className = 'grid-item';
                btn.style.background = 'rgba(255,255,255,0.3)';
                btn.style.padding = '20px';
                btn.style.borderRadius = '10px';
                btn.innerText = val;
                
                btn.onclick = () => {
                    if(val === seq[current]) {
                        btn.style.background = '#81ecec'; // Verde √©xito
                        current++;
                        if(current >= seq.length) win();
                    } else {
                        btn.style.background = '#ff7675'; // Rojo error
                        setTimeout(() => btn.style.background = 'rgba(255,255,255,0.3)', 300);
                        current = 0; // Reiniciar
                    }
                };
                grid.appendChild(btn);
            });
        }

        // 9. MEMORIA (Mini)
        function playMemory() {
            instr.innerText = "Encuentra los pares";
            const cards = ['üê∂', 'üê±', 'üê∂', 'üê±'];
            cards.sort(() => Math.random() - 0.5);
            
            area.innerHTML = '<div class="grid-container" style="grid-template-columns:repeat(2,1fr)" id="memGrid"></div>';
            const grid = document.getElementById('memGrid');
            
            let flipped = [];
            let matched = 0;
            
            cards.forEach((val, idx) => {
                const card = document.createElement('div');
                card.className = 'grid-item';
                card.innerText = '‚ùì';
                card.style.background = 'white';
                card.style.padding = '20px';
                card.style.borderRadius = '10px';
                
                card.onclick = () => {
                    if(flipped.length < 2 && card.innerText === '‚ùì') {
                        card.innerText = val;
                        flipped.push({el: card, val: val});
                        
                        if(flipped.length === 2) {
                            if(flipped[0].val === flipped[1].val) {
                                matched++;
                                flipped = [];
                                if(matched === 2) win();
                            } else {
                                setTimeout(() => {
                                    flipped[0].el.innerText = '‚ùì';
                                    flipped[1].el.innerText = '‚ùì';
                                    flipped = [];
                                }, 600);
                            }
                        }
                    }
                };
                grid.appendChild(card);
            });
        }

        // 10. SLIDER
        function playSlider() {
            instr.innerText = "Desliza hasta el final para amar";
            area.innerHTML = `
                <div class="slider-container">
                    <input type="range" min="0" max="100" value="0" id="loveSlider">
                    <div style="margin-top:20px; font-size:2rem;">üîí</div>
                </div>
            `;
            
            const slider = document.getElementById('loveSlider');
            slider.oninput = () => {
                if(slider.value == 100) win();
            };
        }

        // ================= UTILIDADES =================
        function createMovingBtn(icon, onClick) {
            const btn = document.createElement('div');
            btn.className = 'heart-btn';
            btn.innerText = icon;
            
            btn.onpointerdown = (e) => {
                e.preventDefault();
                onClick();
                moveRandom(btn);
            };
            
            area.appendChild(btn);
            moveRandom(btn);
        }

        function moveRandom(elem) {
            const x = Math.random() * (window.innerWidth - 100) + 20;
            const y = Math.random() * (window.innerHeight - 200) + 50;
            elem.style.left = Math.max(20, x) + 'px';
            elem.style.top = Math.max(50, y) + 'px';
        }

        function wrongAnswer(elem) {
            elem.style.background = '#ff7675';
            elem.style.color = 'white';
        }

        function popEffect() {
            if(navigator.vibrate) navigator.vibrate(50);
        }

        function win() {
            if(!state.active) return;
            state.active = false;
            
            // Elegir mensaje seg√∫n d√≠a
            const now = new Date();
            const diff = Math.floor((now - startDate) / (1000 * 60 * 60 * 24));
            const msgIdx = (diff >= 0 ? diff : 0) % messages.length;
            
            document.getElementById('finalMsg').innerText = messages[msgIdx];
            document.getElementById('winModal').classList.add('active');
            
            // Confeti
            for(let i=0; i<50; i++) {
                const c = document.createElement('div');
                c.innerText = 'üéâ';
                c.style.position = 'fixed';
                c.style.left = Math.random()*100+'vw';
                c.style.top = '-10vh';
                c.style.fontSize = Math.random()*20+10+'px';
                c.style.transition = 'top 2s ease-in';
                c.style.zIndex = 6000;
                document.body.appendChild(c);
                setTimeout(() => c.style.top = '110vh', 100);
            }
        }

        init();
    </script>
</body>
</html>
