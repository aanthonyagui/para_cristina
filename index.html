<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Para Cristina Jamile ‚ù§Ô∏è</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Pacifico&display=swap');

        /* --- BASE --- */
        * { box-sizing: border-box; touch-action: manipulation; user-select: none; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; padding: 0; width: 100vw; height: 100vh; height: 100dvh; overflow: hidden; font-family: 'Fredoka', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; transition: background 2s ease; }

        /* --- ATM√ìSFERAS (Hora del d√≠a) --- */
        body.morning { background: linear-gradient(180deg, #a1c4fd 0%, #c2e9fb 100%); }
        body.sunset  { background: linear-gradient(180deg, #ff9a9e 0%, #fecfef 100%); }
        body.night   { background: linear-gradient(180deg, #09203f 0%, #537895 100%); }

        /* Elementos de Fondo Animados */
        .bg-obj { position: absolute; pointer-events: none; z-index: 0; opacity: 0.6; }
        .cloud { font-size: 5rem; animation: floatCloud 20s linear infinite; color: rgba(255,255,255,0.8); }
        .star { font-size: 1.5rem; animation: twinkle 3s infinite; color: #fff; }
        .spark { width: 10px; height: 10px; background: #fff; border-radius: 50%; animation: riseUp 10s infinite; opacity: 0.5; }

        @keyframes floatCloud { from { transform: translateX(-100vw); } to { transform: translateX(100vw); } }
        @keyframes twinkle { 0%,100%{opacity:0.3; transform:scale(0.8);} 50%{opacity:1; transform:scale(1.2);} }
        @keyframes riseUp { from { transform: translateY(100vh); opacity:0; } 50% { opacity:0.8; } to { transform: translateY(-10vh); opacity:0; } }

        /* --- INTERFAZ --- */
        .ui-top { position: absolute; top: 20px; width: 100%; text-align: center; z-index: 20; pointer-events: none; }
        .day-badge { background: white; color: #ff6b81; padding: 5px 20px; border-radius: 20px; font-weight: bold; display: inline-block; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-bottom: 5px; }
        h1 { font-family: 'Pacifico', cursive; font-size: 2.2rem; margin: 0; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .instruction { background: rgba(0,0,0,0.3); backdrop-filter: blur(5px); padding: 5px 15px; border-radius: 10px; font-size: 0.9rem; display: inline-block; margin-top: 5px; }

        /* --- √ÅREA DE JUEGO --- */
        #gameArea { width: 100%; height: 100%; position: relative; z-index: 10; display: flex; align-items: center; justify-content: center; }

        /* Estilos Gen√©ricos para Juegos */
        .g-btn { font-size: 3.5rem; cursor: pointer; transition: transform 0.1s; position: absolute; filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2)); }
        .g-btn:active { transform: scale(0.9); }
        .grid { display: grid; gap: 10px; background: rgba(255,255,255,0.25); padding: 15px; border-radius: 20px; backdrop-filter: blur(5px); }
        .card { background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem; cursor: pointer; }
        
        /* Modal Victoria */
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 50; display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: 0.5s; }
        .modal.active { opacity: 1; pointer-events: all; }
        .modal-box { background: white; width: 85%; padding: 30px; border-radius: 25px; text-align: center; color: #333; transform: scale(0.5); transition: 0.4s; border: 4px solid #ff9a9e; }
        .modal.active .modal-box { transform: scale(1); }
        .btn-reset { background: #ff6b81; color: white; border: none; padding: 10px 25px; border-radius: 20px; margin-top: 15px; cursor: pointer; font-weight: bold; font-size: 1rem; }

    </style>
</head>
<body>

    <div id="bgLayer"></div>

    <div class="ui-top">
        <div id="dayDisplay" class="day-badge">D√≠a 1</div>
        <h1>Cristina Jamile</h1>
        <div id="instr" class="instruction">Cargando...</div>
    </div>

    <div id="gameArea"></div>

    <div class="modal" id="winModal">
        <div class="modal-box">
            <h2 style="margin:0; color:#ff6b81;">¬°Excelente! üíñ</h2>
            <p id="winMsg" style="font-size:1.1rem; margin:20px 0; font-style:italic;">...</p>
            <div style="font-size:3rem;">üíëüî•‚ú®</div>
            <button class="btn-reset" onclick="location.reload()">Jugar otro</button>
        </div>
    </div>

    <script>
        // ================= CONFIGURACI√ìN =================
        const startDate = new Date(2025, 11, 29); // 29 Dic 2025
        
        const quotes = [
            "Eres mi casualidad favorita.", "Tu sonrisa es mi motor.", "Me encantas cada d√≠a m√°s.",
            "Contigo todo es perfecto.", "Gracias por existir.", "Eres mi lugar seguro.",
            "Te elijo hoy y siempre.", "Mi mundo es mejor contigo.", "Eres magia pura.",
            "No te cambio por nada.", "Eres el amor de mi vida.", "Haces mis d√≠as felices.",
            "Te pienso a cada instante.", "Eres mi notificaci√≥n favorita.", "Juntos es mi sitio favorito.",
            "Te quiero hasta el infinito.", "Eres mi sue√±o hecho realidad.", "Simplemente te amo.",
            "Gracias por aguantarme.", "Eres perfecta para m√≠."
        ];

        let state = { score: 0, target: 0, active: true };
        const area = document.getElementById('gameArea');
        const instr = document.getElementById('instr');

        // ================= SISTEMA ATMOSF√âRICO =================
        function setAtmosphere() {
            const h = new Date().getHours();
            const body = document.body;
            const layer = document.getElementById('bgLayer');
            layer.innerHTML = ''; // Limpiar

            body.classList.remove('morning', 'sunset', 'night');

            if(h >= 6 && h < 17) {
                // MA√ëANA
                body.classList.add('morning');
                createBgItems('‚òÅÔ∏è', 'cloud', 5);
            } else if (h >= 17 && h < 20) {
                // ATARDECER
                body.classList.add('sunset');
                createBgItems('', 'spark', 20); // Part√≠culas brillantes
            } else {
                // NOCHE
                body.classList.add('night');
                createBgItems('‚ú¶', 'star', 30);
            }
        }

        function createBgItems(char, className, count) {
            const layer = document.getElementById('bgLayer');
            for(let i=0; i<count; i++) {
                const el = document.createElement('div');
                el.className = `bg-obj ${className}`;
                el.innerText = char;
                el.style.left = Math.random() * 100 + 'vw';
                el.style.top = Math.random() * 100 + 'vh';
                el.style.animationDuration = (Math.random() * 10 + 5) + 's';
                el.style.animationDelay = (Math.random() * 5) + 's';
                layer.appendChild(el);
            }
        }

        // ================= INICIALIZACI√ìN =================
        function init() {
            setAtmosphere();

            // Calcular D√≠a
            const now = new Date();
            const diff = Math.floor((now - startDate) / (1000 * 60 * 60 * 24));
            const day = diff >= 0 ? diff + 1 : 1;
            document.getElementById('dayDisplay').innerText = `D√≠a ${day}`;

            // Seleccionar Juego (0 a 19)
            const gameIdx = (day - 1) % 20; 
            
            // Array de funciones de juegos
            const games = [
                gChase, gRain, gClicker, gUnique, gBalloon, 
                gWhack, gMath, gSequence, gMemory, gSlider,
                gClean, gSafe, gSimon, gPixel, gFish,
                gGarden, gLetter, gWheel, gBattery, gPuzzle
            ];

            // Iniciar juego correspondiente
            if(games[gameIdx]) games[gameIdx]();
            else gChase(); // Fallback
        }

        // ================= UTILIDADES DE JUEGO =================
        function win() {
            if(!state.active) return;
            state.active = false;
            // Vibrar
            if(navigator.vibrate) try{navigator.vibrate([100,50,100]);}catch(e){}
            // Frase del d√≠a
            const day = parseInt(document.getElementById('dayDisplay').innerText.split(' ')[1]);
            const qIdx = (day - 1) % quotes.length;
            document.getElementById('winMsg').innerText = quotes[qIdx];
            // Mostrar
            document.getElementById('winModal').classList.add('active');
            throwConfetti();
        }

        function throwConfetti() {
            for(let i=0; i<50; i++) {
                const c = document.createElement('div');
                c.innerText = ['üéâ','‚ù§Ô∏è','‚ú®'][Math.floor(Math.random()*3)];
                c.style.position = 'fixed'; c.style.left = Math.random()*100+'vw'; c.style.top = '-10vh';
                c.style.fontSize = (Math.random()*20+10)+'px'; c.style.zIndex=60;
                c.style.transition = 'top 3s ease-in';
                document.body.appendChild(c);
                setTimeout(()=>c.style.top='110vh', 50);
            }
        }

        function randPos(el) {
            el.style.left = Math.random() * (window.innerWidth - 80) + 10 + 'px';
            el.style.top = Math.random() * (window.innerHeight - 150) + 60 + 'px';
        }

        // ================= LOS 20 MINIJUEGOS =================

        // 1. Escapista
        function gChase() {
            instr.innerText = "Atrapa el coraz√≥n 5 veces";
            state.target = 5;
            const b = document.createElement('div'); b.className='g-btn'; b.innerText='‚ù§Ô∏è';
            b.onpointerdown = (e) => { e.preventDefault(); state.score++; if(state.score>=5) win(); else randPos(b); };
            area.appendChild(b); randPos(b);
        }
        // 2. Lluvia
        function gRain() {
            instr.innerText = "Atrapa 5 estrellas fugaces";
            state.target = 5;
            let iv = setInterval(() => {
                if(!state.active) return clearInterval(iv);
                const e = document.createElement('div'); e.innerText='üåü'; e.style.position='absolute'; e.style.fontSize='3rem';
                e.style.left=Math.random()*90+'%'; e.style.top='-50px'; e.style.transition='top 3s linear';
                e.onpointerdown = ()=>{ e.remove(); state.score++; if(state.score>=5) {clearInterval(iv); win();} };
                area.appendChild(e); setTimeout(()=>e.style.top='110vh',50); setTimeout(()=>e.remove(),3000);
            }, 800);
        }
        // 3. Clicker
        function gClicker() {
            instr.innerText = "¬°Dale muchos clics!";
            state.target = 20;
            const b = document.createElement('div'); b.className='g-btn'; b.innerText='üî•'; b.style.position='relative';
            b.onpointerdown = ()=>{ state.score++; b.style.transform='scale(1.2)'; setTimeout(()=>b.style.transform='scale(1)',100); if(state.score>=20) win(); };
            area.appendChild(b);
        }
        // 4. √önico
        function gUnique() {
            instr.innerText = "Encuentra el diferente";
            area.innerHTML = `<div class="grid" style="grid-template-columns:repeat(4,1fr)" id="gGrid"></div>`;
            const g = document.getElementById('gGrid');
            const winIdx = Math.floor(Math.random()*16);
            for(let i=0; i<16; i++){
                const d = document.createElement('div'); d.className='card'; d.innerText = (i===winIdx)?'üòª':'üòº';
                d.style.height='60px';
                d.onclick=()=>{ if(i===winIdx) win(); else d.innerText='‚ùå'; };
                g.appendChild(d);
            }
        }
        // 5. Globo
        function gBalloon() {
            instr.innerText = "Mant√©n presionado para inflar";
            const b = document.createElement('div'); b.innerText='üéà'; b.style.fontSize='3rem'; b.style.cursor='pointer';
            let s=1; let growing=false;
            b.onpointerdown=()=>growing=true; b.onpointerup=()=>growing=false;
            area.appendChild(b);
            setInterval(()=>{
                if(state.active && growing){ s+=0.05; b.style.transform=`scale(${s})`; if(s>4) win(); }
                else if(s>1) { s-=0.05; b.style.transform=`scale(${s})`; }
            },50);
        }
        // 6. Whack (Topo)
        function gWhack() {
            instr.innerText = "Golpea al aparecer";
            state.target=5;
            const b = document.createElement('div'); b.className='g-btn'; b.innerText='üêª';
            b.onpointerdown = ()=>{ state.score++; if(state.score>=5){ b.remove(); win();} else randPos(b); };
            area.appendChild(b); randPos(b);
            setInterval(()=>{ if(state.active) randPos(b); }, 900);
        }
        // 7. Math
        function gMath() {
            instr.innerText = "¬øCu√°nto nos queremos?";
            area.innerHTML = `<div style="text-align:center; font-size:2rem; font-weight:bold;">1 + 1 = ?<br><br>
            <button onclick="this.style.background='red';this.innerText='No'" style="font-size:1.5rem; padding:10px; border-radius:10px; border:none;">2</button>
            <button onclick="win()" style="font-size:1.5rem; padding:10px; border-radius:10px; border:none; background:#ff6b81; color:white;">Todo</button></div>`;
        }
        // 8. Secuencia
        function gSequence() {
            instr.innerText = "Orden: 1 -> 2 -> 3 -> ‚ù§Ô∏è";
            const seq=['1','2','3','‚ù§Ô∏è']; let idx=0;
            const wrap=document.createElement('div'); wrap.style.display='flex'; wrap.style.gap='20px';
            [...seq].sort(()=>Math.random()-0.5).forEach(txt=>{
                const b=document.createElement('div'); b.className='card'; b.style.width='60px'; b.style.height='60px'; b.innerText=txt;
                b.onclick=()=>{ 
                    if(txt===seq[idx]){ b.style.background='#81ecec'; idx++; if(idx===4) win(); }
                    else { b.style.background='red'; setTimeout(()=>b.style.background='white',300); idx=0; }
                };
                wrap.appendChild(b);
            });
            area.appendChild(wrap);
        }
        // 9. Memoria
        function gMemory() {
            instr.innerText = "Busca la pareja";
            const icons=['üê∂','üê∂','üê±','üê±']; icons.sort(()=>Math.random()-0.5);
            area.innerHTML = `<div class="grid" style="grid-template-columns:repeat(2,1fr)" id="mGrid"></div>`;
            const g=document.getElementById('mGrid'); let flip=[]; let m=0;
            icons.forEach(icon=>{
                const c=document.createElement('div'); c.className='card'; c.innerText='‚ùì'; c.style.height='80px';
                c.onclick=()=>{
                    if(c.innerText!=='‚ùì' || flip.length>=2) return;
                    c.innerText=icon; flip.push(c);
                    if(flip.length===2){
                        if(flip[0].innerText===flip[1].innerText){ m++; flip=[]; if(m===2) win(); }
                        else { setTimeout(()=>{ flip[0].innerText='‚ùì'; flip[1].innerText='‚ùì'; flip=[]; },600); }
                    }
                };
                g.appendChild(c);
            });
        }
        // 10. Slider
        function gSlider() {
            instr.innerText = "Desliza hasta el amor";
            area.innerHTML=`<input type="range" id="sld" style="width:80%;" value="0"><div style="font-size:2rem; margin-top:20px;">üîí</div>`;
            document.getElementById('sld').oninput = function(){ if(this.value==100) win(); };
        }
        // 11. Limpiar (Scratch simulado)
        function gClean() {
            instr.innerText = "Limpia la pantalla (Pasa el dedo)";
            area.innerHTML = `<div id="fog" style="width:250px; height:250px; background:#ddd; border-radius:20px; display:flex; align-items:center; justify-content:center; position:relative; overflow:hidden;"><span style="color:#999;">Empa√±ado</span></div>`;
            const f = document.getElementById('fog');
            let moves=0;
            f.onpointermove = ()=>{ moves++; f.style.opacity = 1 - (moves/50); if(moves>50){ f.innerHTML='<span style="font-size:3rem">ü•∞</span>'; f.style.background='transparent'; f.style.opacity=1; setTimeout(win,500); } };
        }
        // 12. Caja Fuerte
        function gSafe() {
            instr.innerText = "Clave: Nuestro d√≠a (29)";
            area.innerHTML = `<input type="number" id="code" style="font-size:2rem; width:100px; text-align:center; border-radius:10px;">`;
            const inp = document.getElementById('code');
            inp.oninput = ()=>{ if(inp.value == '29') win(); };
        }
        // 13. Simon Dice (Simplificado)
        function gSimon() {
            instr.innerText = "Repite: Rojo, Azul";
            area.innerHTML = `<div style="display:flex; gap:10px;"><div id="r" class="card" style="width:80px; height:80px; background:red;"></div><div id="b" class="card" style="width:80px; height:80px; background:blue;"></div></div>`;
            let step=0;
            document.getElementById('r').onclick=()=>{ if(step===0) step++; else step=0; };
            document.getElementById('b').onclick=()=>{ if(step===1) win(); else step=0; };
        }
        // 14. Pixel Art
        function gPixel() {
            instr.innerText = "Dibuja un coraz√≥n (toca los cuadros)";
            area.innerHTML = `<div class="grid" style="grid-template-columns:repeat(3,1fr)" id="pGrid"></div>`;
            let c=0;
            for(let i=0; i<9; i++){
                const d=document.createElement('div'); d.className='card'; d.style.height='50px';
                d.onclick=()=>{ d.style.background='red'; c++; if(c>=5) win(); };
                document.getElementById('pGrid').appendChild(d);
            }
        }
        // 15. Pesca
        function gFish() {
            instr.innerText = "Atrapa el pez del amor";
            const f = document.createElement('div'); f.className='g-btn'; f.innerText='üê†';
            f.style.transition='all 2s linear';
            setInterval(()=>{ if(state.active) randPos(f); }, 800);
            f.onpointerdown=()=>{ win(); f.remove(); };
            area.appendChild(f);
        }
        // 16. Jardin
        function gGarden() {
            instr.innerText = "Toca la semilla para que crezca";
            const s = document.createElement('div'); s.innerText='üå±'; s.style.fontSize='3rem'; s.style.cursor='pointer';
            let stage=0; 
            s.onclick=()=>{ stage++; if(stage==1) s.innerText='üåø'; if(stage==2) s.innerText='üåπ'; if(stage==3) win(); };
            area.appendChild(s);
        }
        // 17. Carta
        function gLetter() {
            instr.innerText = "Abre la carta";
            const l = document.createElement('div'); l.innerText='üì©'; l.style.fontSize='5rem'; l.style.cursor='pointer';
            l.onclick=()=>{ l.innerText='üíå'; setTimeout(win,500); };
            area.appendChild(l);
        }
        // 18. Ruleta
        function gWheel() {
            instr.innerText = "Toca para girar";
            const w = document.createElement('div'); w.innerText='üé°'; w.style.fontSize='5rem'; w.style.transition='transform 2s ease-out';
            w.onclick=()=>{ w.style.transform='rotate(720deg)'; setTimeout(win, 2000); };
            area.appendChild(w);
        }
        // 19. Bateria
        function gBattery() {
            instr.innerText = "Carga nuestro amor (Toca r√°pido)";
            state.target=10;
            const b = document.createElement('div'); b.style.border='3px solid white'; b.style.width='100px'; b.style.height='40px'; b.style.position='relative';
            const fill = document.createElement('div'); fill.style.background='#0f0'; fill.style.height='100%'; fill.style.width='0%';
            b.appendChild(fill);
            b.onpointerdown = ()=>{ state.score++; fill.style.width=(state.score*10)+'%'; if(state.score>=10) win(); };
            area.appendChild(b);
        }
        // 20. Puzzle (Click)
        function gPuzzle() {
            instr.innerText = "Arma la foto (Click izquierdo)";
            area.innerHTML = `<div style="display:flex;"><div id="p1" style="font-size:3rem; transform:rotate(90deg);">üíè</div></div>`;
            const p = document.getElementById('p1');
            p.onclick=()=>{ p.style.transform='rotate(0deg)'; setTimeout(win, 500); };
        }

        window.onload = init;
    </script>
</body>
</html>
